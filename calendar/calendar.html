<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Mood Tracker</title>
    <link rel="stylesheet" href="calendarstyle.css"/>
    <link rel="stylesheet" href="../calendarstyle.css"/>
    <link rel="responses" href="responses.js">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
</head>
<body>

<h2>Real-Time Mood Tracker</h2>
<div class="menu-icon" onclick="toggleMenu()">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
</div>
<div class="menu-sidebar" id="menuSidebar">
    <button class="back-button" onclick="toggleMenu()">&#x2B05;</button>
    <ul>
        <li><a href="../index.html">Check in</a></li>
        <li><a href="../tools/toolPage.html">Tools</a></li>
        <li><a href="../calendar/calendar.htmll">Analyse/Calendar</a></li>
        <li><a href="../getHelp/getHelp.html">Get Help</a></li>
    </ul>
</div>

<div id="calendar"></div>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>

<script>
    $(document).ready(function () {
        var calendar = $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            events: [],
            timeFormat: 'HH:mm'
        });

        // Retrieve feeling parameter from URL
        const urlParams = new URLSearchParams(window.location.search);
        const feeling = urlParams.get('feeling');
        const colour = urlParams.get('colour');

        // If feeling parameter exists, render it as an event on the calendar
        if (feeling) {
            var moodEvent = {
                title: feeling,
                start: moment(),
                allDay: false,
                color: colour
            };
            calendar.fullCalendar('renderEvent', moodEvent, true);
        }
    });

    // Function to toggle menu sidebar
    function toggleMenu() {
        var menuSidebar = document.getElementById('menuSidebar');
        menuSidebar.classList.toggle('active');

    }
</script>

<script src="../responses.js"></script>
</body>
</html>
